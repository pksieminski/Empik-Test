# Empik-Test GitHub Users API

Test project for Empik - GitHub Users service

**Foreword:**
Based on the nature of the Service, where it acts as a Proxy between GitHub API, with low range of functionalities on Service side, I made following assumptions:
- GitHub users fetch will be non-blocking async operation
- Statistics update for Requests Count will be non-blocking simple increment query to MongoDB
- Calculations (for now) are implemented as simple blocking code in this service, but I made an assumption that if it was heavy task - we would move it to its own service or Lambda - thus non-blocking async request

Taking above into account I decided to use this opportunity to write proof of concept Reactive API.

**Skipped solutions:**
Due to available short timeframe, some solutions might be skipped for now:
- Spring Cloud Config Server (GitHub for public + Vault for secrets)
- Vault Server
- ELK Stack (PoC)
- Gateway (PoC)
- Authentication Server + JWT + Asymmetric Keys
- Sleuth & Zipkin (PoC)
- Kubernetes (PoC)

Aove would be My desired target way to run this app.

## Table of contents
* [Technologies](#technologies)
* [Documentation](#documentation)
* [Running Project](#running-project)
* [Tests](#tests)
* [Features](#features)

## Technologies
Project is created with:
* [Maven](https://maven.apache.org/)
* [Spring](https://spring.io/projects/spring-framework)
* [Spring Boot](https://spring.io/projects/spring-boot)
* [WebFlux](https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html)
* [Resilience4j](https://resilience4j.readme.io/)
* [Docker](https://www.docker.com/)
* [Docker Compose](https://docs.docker.com/compose/)
* [MongoDB](https://www.mongodb.com/)
* [OpenApi 3](https://springdoc.org/)
* [Swagger-UI](https://swagger.io/tools/swagger-ui/)
* [JUnit](https://junit.org/junit5/)
* [Mockito](https://site.mockito.org/)
* [Testcontainers](https://www.testcontainers.org/)
* [WireMock](http://wiremock.org/docs/spring-boot/)
* [Spring Cloud Contract](https://spring.io/projects/spring-cloud-contract)

## Documentation
Project has autogenerated documentation of REST API according to OpenApi 3 specification with UI presentation generated with Swagger

After running the project it can be accessed via following URIs locally:
* [Swagger-UI](http://localhost:8080/swagger-ui.html)
* [OpenApi](http://localhost:8080/v3/api-docs)

## Running Project
### Dockerized application with dev profile
To run and build docker-compose containers with Spring Boot App and MongoDB:
```sh
docker-compose up --build
```

Dockerized application will be launched with active `dev` profile. 

Properties file `application-dev.yaml` will be loaded.

### Locally with dockerized dependencies
To run and project locally, run mongo container first:
```sh
docker-compose up mongo
```

Then run project locally with env set to `local`

## Tests
Project includes tests:
* Unit Tests
* Integration Tests - using Testcontainers MongoDB
* Component Tests (End-to-End Sevice tests) - using Testcontainers MongoDB and WireMock external API Stubs
* Contract Tests - using WireMock on Provider side API contract testing

## Features
* REST fetching of `User` based on `GitHub User Profile`

## Detailed Attribute JSON view
Available from endpoint `GET` `/users/{login}`
```json
{
    "id": 57523979,
    "login": "pksieminski",
    "name": "Patryk Siemi≈Ñski",
    "type": "User",
    "avatarUrl": "https://avatars.githubusercontent.com/u/57523979?v=4",
    "createdAt": "2019-11-08T09:09:47Z",
    "calculations": 0.0
}
```

## To Do:
- Write missing tests